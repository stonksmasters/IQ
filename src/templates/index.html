67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
<!DOCTYPE html>
  </style>
</head>
<body>
  <!-- Fullscreen Live Video Stream -->
  <img id="videoStream" src="/video_feed" alt="Live Video Stream">

  <!-- HUD for signals -->
  <div id="hud">
    <h2>Wi-Fi Signals</h2>
    <ul id="wifi-list"></ul>
    <h2>Bluetooth Signals</h2>
    <ul id="bluetooth-list"></ul>
    <button class="clear-button" onclick="clearSignal()">Clear Tracking</button>
  </div>

  <script>
    // Initialize Socket.IO connection
    const socket = io({
      transports: ['websocket'], // Use WebSocket for optimal performance
    });

    // Handle successful connection
    socket.on('connect', () => {
      console.log('Connected to server');
    });

    // Handle incoming signals and update the UI
    socket.on('update_signals', (data) => {
      console.log('Received signals:', data.signals);
      updateSignalLists(data.signals);
    });

    // Update the signal lists for Wi-Fi and Bluetooth
    function updateSignalLists(signals) {
      const wifiList = document.getElementById('wifi-list');
      const bluetoothList = document.getElementById('bluetooth-list');
      wifiList.innerHTML = '';
      bluetoothList.innerHTML = '';

      signals.forEach((signal) => {
        const listItem = document.createElement('li');
        listItem.textContent = `${signal.name} (RSSI: ${signal.rssi})`;

        if (signal.type.toLowerCase() === 'wifi') {
          wifiList.appendChild(listItem);
        } else if (signal.type.toLowerCase() === 'bluetooth') {
          bluetoothList.appendChild(listItem);
        }
      });
    }

    // Clear signals via POST request
    async function clearSignal() {
      try {
        const response = await fetch('/clear_signal', { method: 'POST' });
        if (response.ok) {
          alert('Tracking cleared.');
        } else {
          console.error('Failed to clear signals:', response.statusText);
        }
      } catch (error) {
        console.error('Error clearing signals:', error);
      }
    }

    // Handle disconnection from server
    socket.on('disconnect', () => {
      console.warn('Disconnected from server');
    });
  </script>
</body>
</html>